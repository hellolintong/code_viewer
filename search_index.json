{"index":{"version":"0.5.12","fields":[{"name":"title","boost":10},{"name":"keywords","boost":15},{"name":"body","boost":1}],"ref":"url","documentStore":{"store":{"./":["code","codeview","viewer通过分析流行的go开源项目，学习golang的开发技巧","介绍"],"bigcache/BigCache.html":["bigcach","go开源项目bigcache如何加速并发访问以及避免高额的gc开销","介绍实现的文章","项目地址"],"bigcache/modules.html":["模块之间引用关系"],"bigcache/function.html":["函数引用模块关系"],"bigcache/bytes_queue.html":["!=","!q.caninsertaftertail(datalen","&&","&queueerror{\"ful","([]byte,","(int,","(q","*bytesqueue)","+","+=","...","0","0,","1,",":",":=","=","==",">",">=","[]byte)","[]byte,","allocateadditionalmemory(minimum","binary.putuvarint(q.headerbuffer,","binary.uvarint(q.array[index:])","blocksize,","bytes_queu","bytesqueue是一个线程不安全的fifo队列，底层基于bytes数组","copy(data","copy(q.array,","copy(q.array[q.tail:],","data,","data[:len])","datalen","datalen)","err","error)","fals","func","getuvarintsize(uint32(datalen))","headerentrys","headerentrysize)","headerentrysize,","index","index+n+int(blocksize)],","index,","int)","int,","leftmarginindex","len","len(data)","len)","limit","make([]byte,","maximum","n","n(跳过长度)","n,","nil","nil,","oldarray","oldarray[:q.rightmargin])","peek(index","pop","pop()","pop这里先调用peek，找到head对应的数据，这里细看下peek函数，binary.uvarint函数从字节数组中取出一个uint64的编码，这里n是bytes的长度，然后从index","push","push(data","push里面的copy逻辑就是最简单的数据拷贝了","q.allocateadditionalmemory(datalen","q.array","q.array[index+n","q.caninsertbeforehead(datalen","q.capac","q.capacity)","q.capacity+headerentrysize+datalen","q.copy(data,","q.copy(q.headerbuffer,","q.count","q.count++","q.full","q.head","q.maxcapac","q.peek(q.head)","q.peekcheckerr(index)","q.push(data,","q.rightmargin","q.tail","queue.","reached.\"}","return","size","start","tail，那么head跳了，tail也要跳。否则就是tail在head之前的场景，就不需要动，效果如下图：","time.now()","true","uint64(len))","{","}","从上述两张图就可以看出作者对整个bytes_queue的设计。其实理论上，如果不考虑tail到head之前的情况，就是tail往后移动，head也往后移动，然后rightmargin是和tail保持一致的。一旦head到达rightmargin，说明队列出去完毕，然后head和tail移动到队列首部，开始新的操作。","他先对空间做了判断：","但是因为存在一种case就是可能head还没到达rightmargin，但是用户想插入数据，tail之后的数据不够用了，那就要考虑这个head之前的空间够不够用，在这种情况下，tail和head的关系会变成图2的情况。","先看看push这个操作的逻辑：","已经把中间的空白填充到新的数组中了。","扩容","扩容是采用两倍扩容方案，然后执行拷贝操作。这里比较核心的逻辑是如果是tail","整体设计","是否可以扩容","是否在head前面能够插入数据","是否在tail尾部能够插入数据","是否满足扩容条件","最后会执行真正的push逻辑，这里看看push逻辑:","然后head跳过已经pop出来的数据，如果head到达底部，head就跳回到leftmarginindex，在这种情况下，如果是正常场景：就是head","读取blocksize的数据。","这里会更新rightmargin，这里要注意了，如果是tail","这里其实我有个疑惑，我没看出来这个补充的意义是啥，因为copy(q.array,","首先是把长度设置成bytes，然后先写入数据的长度，最后再写入数据。"]},"length":5},"tokenStore":{"root":{"0":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.007874015748031496}},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}},"1":{"docs":{},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}},"docs":{},"c":{"docs":{},"o":{"docs":{},"d":{"docs":{},"e":{"docs":{"./":{"ref":"./","tf":0.3333333333333333}},"v":{"docs":{},"i":{"docs":{},"e":{"docs":{},"w":{"docs":{"./":{"ref":"./","tf":0.3333333333333333}}}}}}}},"p":{"docs":{},"y":{"docs":{},"(":{"docs":{},"d":{"docs":{},"a":{"docs":{},"t":{"docs":{},"a":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}},"q":{"docs":{},".":{"docs":{},"a":{"docs":{},"r":{"docs":{},"r":{"docs":{},"a":{"docs":{},"y":{"docs":{},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}},"[":{"docs":{},"q":{"docs":{},".":{"docs":{},"t":{"docs":{},"a":{"docs":{},"i":{"docs":{},"l":{"docs":{},":":{"docs":{},"]":{"docs":{},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}}}}}},"v":{"docs":{},"i":{"docs":{},"e":{"docs":{},"w":{"docs":{},"e":{"docs":{},"r":{"docs":{},"通":{"docs":{},"过":{"docs":{},"分":{"docs":{},"析":{"docs":{},"流":{"docs":{},"行":{"docs":{},"的":{"docs":{},"g":{"docs":{},"o":{"docs":{},"开":{"docs":{},"源":{"docs":{},"项":{"docs":{},"目":{"docs":{},"，":{"docs":{},"学":{"docs":{},"习":{"docs":{},"g":{"docs":{},"o":{"docs":{},"l":{"docs":{},"a":{"docs":{},"n":{"docs":{},"g":{"docs":{},"的":{"docs":{},"开":{"docs":{},"发":{"docs":{},"技":{"docs":{},"巧":{"docs":{"./":{"ref":"./","tf":0.3333333333333333}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"介":{"docs":{},"绍":{"docs":{"./":{"ref":"./","tf":10}},"实":{"docs":{},"现":{"docs":{},"的":{"docs":{},"文":{"docs":{},"章":{"docs":{"bigcache/BigCache.html":{"ref":"bigcache/BigCache.html","tf":0.25}}}}}}}}},"b":{"docs":{},"i":{"docs":{},"g":{"docs":{},"c":{"docs":{},"a":{"docs":{},"c":{"docs":{},"h":{"docs":{"bigcache/BigCache.html":{"ref":"bigcache/BigCache.html","tf":10.25}}}}}}},"n":{"docs":{},"a":{"docs":{},"r":{"docs":{},"y":{"docs":{},".":{"docs":{},"p":{"docs":{},"u":{"docs":{},"t":{"docs":{},"u":{"docs":{},"v":{"docs":{},"a":{"docs":{},"r":{"docs":{},"i":{"docs":{},"n":{"docs":{},"t":{"docs":{},"(":{"docs":{},"q":{"docs":{},".":{"docs":{},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"e":{"docs":{},"r":{"docs":{},"b":{"docs":{},"u":{"docs":{},"f":{"docs":{},"f":{"docs":{},"e":{"docs":{},"r":{"docs":{},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}}}}}}}}}},"u":{"docs":{},"v":{"docs":{},"a":{"docs":{},"r":{"docs":{},"i":{"docs":{},"n":{"docs":{},"t":{"docs":{},"(":{"docs":{},"q":{"docs":{},".":{"docs":{},"a":{"docs":{},"r":{"docs":{},"r":{"docs":{},"a":{"docs":{},"y":{"docs":{},"[":{"docs":{},"i":{"docs":{},"n":{"docs":{},"d":{"docs":{},"e":{"docs":{},"x":{"docs":{},":":{"docs":{},"]":{"docs":{},")":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"l":{"docs":{},"o":{"docs":{},"c":{"docs":{},"k":{"docs":{},"s":{"docs":{},"i":{"docs":{},"z":{"docs":{},"e":{"docs":{},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}},"y":{"docs":{},"t":{"docs":{},"e":{"docs":{},"s":{"docs":{},"_":{"docs":{},"q":{"docs":{},"u":{"docs":{},"e":{"docs":{},"u":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":10}}}}}}},"q":{"docs":{},"u":{"docs":{},"e":{"docs":{},"u":{"docs":{},"e":{"docs":{},"是":{"docs":{},"一":{"docs":{},"个":{"docs":{},"线":{"docs":{},"程":{"docs":{},"不":{"docs":{},"安":{"docs":{},"全":{"docs":{},"的":{"docs":{},"f":{"docs":{},"i":{"docs":{},"f":{"docs":{},"o":{"docs":{},"队":{"docs":{},"列":{"docs":{},"，":{"docs":{},"底":{"docs":{},"层":{"docs":{},"基":{"docs":{},"于":{"docs":{},"b":{"docs":{},"y":{"docs":{},"t":{"docs":{},"e":{"docs":{},"s":{"docs":{},"数":{"docs":{},"组":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"g":{"docs":{},"o":{"docs":{},"开":{"docs":{},"源":{"docs":{},"项":{"docs":{},"目":{"docs":{},"b":{"docs":{},"i":{"docs":{},"g":{"docs":{},"c":{"docs":{},"a":{"docs":{},"c":{"docs":{},"h":{"docs":{},"e":{"docs":{},"如":{"docs":{},"何":{"docs":{},"加":{"docs":{},"速":{"docs":{},"并":{"docs":{},"发":{"docs":{},"访":{"docs":{},"问":{"docs":{},"以":{"docs":{},"及":{"docs":{},"避":{"docs":{},"免":{"docs":{},"高":{"docs":{},"额":{"docs":{},"的":{"docs":{},"g":{"docs":{},"c":{"docs":{},"开":{"docs":{},"销":{"docs":{"bigcache/BigCache.html":{"ref":"bigcache/BigCache.html","tf":0.25}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"e":{"docs":{},"t":{"docs":{},"u":{"docs":{},"v":{"docs":{},"a":{"docs":{},"r":{"docs":{},"i":{"docs":{},"n":{"docs":{},"t":{"docs":{},"s":{"docs":{},"i":{"docs":{},"z":{"docs":{},"e":{"docs":{},"(":{"docs":{},"u":{"docs":{},"i":{"docs":{},"n":{"docs":{},"t":{"3":{"2":{"docs":{},"(":{"docs":{},"d":{"docs":{},"a":{"docs":{},"t":{"docs":{},"a":{"docs":{},"l":{"docs":{},"e":{"docs":{},"n":{"docs":{},")":{"docs":{},")":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}},"docs":{}},"docs":{}}}}}}}}}}}}}}}}}}}},"项":{"docs":{},"目":{"docs":{},"地":{"docs":{},"址":{"docs":{"bigcache/BigCache.html":{"ref":"bigcache/BigCache.html","tf":0.25}}}}}},"模":{"docs":{},"块":{"docs":{},"之":{"docs":{},"间":{"docs":{},"引":{"docs":{},"用":{"docs":{},"关":{"docs":{},"系":{"docs":{"bigcache/modules.html":{"ref":"bigcache/modules.html","tf":11}}}}}}}}}},"函":{"docs":{},"数":{"docs":{},"引":{"docs":{},"用":{"docs":{},"模":{"docs":{},"块":{"docs":{},"关":{"docs":{},"系":{"docs":{"bigcache/function.html":{"ref":"bigcache/function.html","tf":11}}}}}}}}}},"!":{"docs":{},"=":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.011811023622047244}}},"q":{"docs":{},".":{"docs":{},"c":{"docs":{},"a":{"docs":{},"n":{"docs":{},"i":{"docs":{},"n":{"docs":{},"s":{"docs":{},"e":{"docs":{},"r":{"docs":{},"t":{"docs":{},"a":{"docs":{},"f":{"docs":{},"t":{"docs":{},"e":{"docs":{},"r":{"docs":{},"t":{"docs":{},"a":{"docs":{},"i":{"docs":{},"l":{"docs":{},"(":{"docs":{},"d":{"docs":{},"a":{"docs":{},"t":{"docs":{},"a":{"docs":{},"l":{"docs":{},"e":{"docs":{},"n":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"&":{"docs":{},"&":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.007874015748031496}}},"q":{"docs":{},"u":{"docs":{},"e":{"docs":{},"u":{"docs":{},"e":{"docs":{},"e":{"docs":{},"r":{"docs":{},"r":{"docs":{},"o":{"docs":{},"r":{"docs":{},"{":{"docs":{},"\"":{"docs":{},"f":{"docs":{},"u":{"docs":{},"l":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}},"(":{"docs":{},"[":{"docs":{},"]":{"docs":{},"b":{"docs":{},"y":{"docs":{},"t":{"docs":{},"e":{"docs":{},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.007874015748031496}}}}}}}}},"i":{"docs":{},"n":{"docs":{},"t":{"docs":{},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}},"q":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.023622047244094488}}}},"*":{"docs":{},"b":{"docs":{},"y":{"docs":{},"t":{"docs":{},"e":{"docs":{},"s":{"docs":{},"q":{"docs":{},"u":{"docs":{},"e":{"docs":{},"u":{"docs":{},"e":{"docs":{},")":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.023622047244094488}}}}}}}}}}}}}},"+":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.01968503937007874}},"=":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.007874015748031496}}}},".":{"docs":{},".":{"docs":{},".":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}},":":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}},"=":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.03937007874015748}}}},"=":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.03543307086614173}},"=":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.011811023622047244}}}},">":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.011811023622047244}},"=":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}},"[":{"docs":{},"]":{"docs":{},"b":{"docs":{},"y":{"docs":{},"t":{"docs":{},"e":{"docs":{},")":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.007874015748031496}}}}}}}}},"a":{"docs":{},"l":{"docs":{},"l":{"docs":{},"o":{"docs":{},"c":{"docs":{},"a":{"docs":{},"t":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"d":{"docs":{},"i":{"docs":{},"t":{"docs":{},"i":{"docs":{},"o":{"docs":{},"n":{"docs":{},"a":{"docs":{},"l":{"docs":{},"m":{"docs":{},"e":{"docs":{},"m":{"docs":{},"o":{"docs":{},"r":{"docs":{},"y":{"docs":{},"(":{"docs":{},"m":{"docs":{},"i":{"docs":{},"n":{"docs":{},"i":{"docs":{},"m":{"docs":{},"u":{"docs":{},"m":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"d":{"docs":{},"a":{"docs":{},"t":{"docs":{},"a":{"docs":{},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.007874015748031496}}},"[":{"docs":{},":":{"docs":{},"l":{"docs":{},"e":{"docs":{},"n":{"docs":{},"]":{"docs":{},")":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}},"l":{"docs":{},"e":{"docs":{},"n":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}},")":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}},"e":{"docs":{},"r":{"docs":{},"r":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.023622047244094488}},"o":{"docs":{},"r":{"docs":{},")":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.011811023622047244}}}}}}}},"f":{"docs":{},"a":{"docs":{},"l":{"docs":{},"s":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}},"u":{"docs":{},"n":{"docs":{},"c":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.023622047244094488}}}}}},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"e":{"docs":{},"r":{"docs":{},"e":{"docs":{},"n":{"docs":{},"t":{"docs":{},"r":{"docs":{},"y":{"docs":{},"s":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.011811023622047244}},"i":{"docs":{},"z":{"docs":{},"e":{"docs":{},")":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.015748031496062992}}},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}},"i":{"docs":{},"n":{"docs":{},"d":{"docs":{},"e":{"docs":{},"x":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}},"+":{"docs":{},"n":{"docs":{},"+":{"docs":{},"i":{"docs":{},"n":{"docs":{},"t":{"docs":{},"(":{"docs":{},"b":{"docs":{},"l":{"docs":{},"o":{"docs":{},"c":{"docs":{},"k":{"docs":{},"s":{"docs":{},"i":{"docs":{},"z":{"docs":{},"e":{"docs":{},")":{"docs":{},"]":{"docs":{},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}}},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}},"t":{"docs":{},")":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.015748031496062992}}},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}},"l":{"docs":{},"e":{"docs":{},"f":{"docs":{},"t":{"docs":{},"m":{"docs":{},"a":{"docs":{},"r":{"docs":{},"g":{"docs":{},"i":{"docs":{},"n":{"docs":{},"i":{"docs":{},"n":{"docs":{},"d":{"docs":{},"e":{"docs":{},"x":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.015748031496062992}}}}}}}}}}}}}}},"n":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.007874015748031496}},"(":{"docs":{},"d":{"docs":{},"a":{"docs":{},"t":{"docs":{},"a":{"docs":{},")":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.007874015748031496}}}}}}}},")":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}},"i":{"docs":{},"m":{"docs":{},"i":{"docs":{},"t":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}},"m":{"docs":{},"a":{"docs":{},"k":{"docs":{},"e":{"docs":{},"(":{"docs":{},"[":{"docs":{},"]":{"docs":{},"b":{"docs":{},"y":{"docs":{},"t":{"docs":{},"e":{"docs":{},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}},"x":{"docs":{},"i":{"docs":{},"m":{"docs":{},"u":{"docs":{},"m":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}},"n":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}},"(":{"docs":{},"跳":{"docs":{},"过":{"docs":{},"长":{"docs":{},"度":{"docs":{},")":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}},"i":{"docs":{},"l":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.01968503937007874}},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.007874015748031496}}}}}},"o":{"docs":{},"l":{"docs":{},"d":{"docs":{},"a":{"docs":{},"r":{"docs":{},"r":{"docs":{},"a":{"docs":{},"y":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}},"[":{"docs":{},":":{"docs":{},"q":{"docs":{},".":{"docs":{},"r":{"docs":{},"i":{"docs":{},"g":{"docs":{},"h":{"docs":{},"t":{"docs":{},"m":{"docs":{},"a":{"docs":{},"r":{"docs":{},"g":{"docs":{},"i":{"docs":{},"n":{"docs":{},"]":{"docs":{},")":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.007874015748031496}}}}}}}}}}}}}}}}}}}}}}}}}}},"p":{"docs":{},"e":{"docs":{},"e":{"docs":{},"k":{"docs":{},"(":{"docs":{},"i":{"docs":{},"n":{"docs":{},"d":{"docs":{},"e":{"docs":{},"x":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}},"o":{"docs":{},"p":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}},"(":{"docs":{},")":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}},"这":{"docs":{},"里":{"docs":{},"先":{"docs":{},"调":{"docs":{},"用":{"docs":{},"p":{"docs":{},"e":{"docs":{},"e":{"docs":{},"k":{"docs":{},"，":{"docs":{},"找":{"docs":{},"到":{"docs":{},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"对":{"docs":{},"应":{"docs":{},"的":{"docs":{},"数":{"docs":{},"据":{"docs":{},"，":{"docs":{},"这":{"docs":{},"里":{"docs":{},"细":{"docs":{},"看":{"docs":{},"下":{"docs":{},"p":{"docs":{},"e":{"docs":{},"e":{"docs":{},"k":{"docs":{},"函":{"docs":{},"数":{"docs":{},"，":{"docs":{},"b":{"docs":{},"i":{"docs":{},"n":{"docs":{},"a":{"docs":{},"r":{"docs":{},"y":{"docs":{},".":{"docs":{},"u":{"docs":{},"v":{"docs":{},"a":{"docs":{},"r":{"docs":{},"i":{"docs":{},"n":{"docs":{},"t":{"docs":{},"函":{"docs":{},"数":{"docs":{},"从":{"docs":{},"字":{"docs":{},"节":{"docs":{},"数":{"docs":{},"组":{"docs":{},"中":{"docs":{},"取":{"docs":{},"出":{"docs":{},"一":{"docs":{},"个":{"docs":{},"u":{"docs":{},"i":{"docs":{},"n":{"docs":{},"t":{"6":{"4":{"docs":{},"的":{"docs":{},"编":{"docs":{},"码":{"docs":{},"，":{"docs":{},"这":{"docs":{},"里":{"docs":{},"n":{"docs":{},"是":{"docs":{},"b":{"docs":{},"y":{"docs":{},"t":{"docs":{},"e":{"docs":{},"s":{"docs":{},"的":{"docs":{},"长":{"docs":{},"度":{"docs":{},"，":{"docs":{},"然":{"docs":{},"后":{"docs":{},"从":{"docs":{},"i":{"docs":{},"n":{"docs":{},"d":{"docs":{},"e":{"docs":{},"x":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}}}}}}}}}},"docs":{}},"docs":{}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"u":{"docs":{},"s":{"docs":{},"h":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}},"(":{"docs":{},"d":{"docs":{},"a":{"docs":{},"t":{"docs":{},"a":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.007874015748031496}}}}}}},"里":{"docs":{},"面":{"docs":{},"的":{"docs":{},"c":{"docs":{},"o":{"docs":{},"p":{"docs":{},"y":{"docs":{},"逻":{"docs":{},"辑":{"docs":{},"就":{"docs":{},"是":{"docs":{},"最":{"docs":{},"简":{"docs":{},"单":{"docs":{},"的":{"docs":{},"数":{"docs":{},"据":{"docs":{},"拷":{"docs":{},"贝":{"docs":{},"了":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}}}}}}}},"q":{"docs":{},".":{"docs":{},"a":{"docs":{},"l":{"docs":{},"l":{"docs":{},"o":{"docs":{},"c":{"docs":{},"a":{"docs":{},"t":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"d":{"docs":{},"i":{"docs":{},"t":{"docs":{},"i":{"docs":{},"o":{"docs":{},"n":{"docs":{},"a":{"docs":{},"l":{"docs":{},"m":{"docs":{},"e":{"docs":{},"m":{"docs":{},"o":{"docs":{},"r":{"docs":{},"y":{"docs":{},"(":{"docs":{},"d":{"docs":{},"a":{"docs":{},"t":{"docs":{},"a":{"docs":{},"l":{"docs":{},"e":{"docs":{},"n":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"r":{"docs":{},"r":{"docs":{},"a":{"docs":{},"y":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.007874015748031496}},"[":{"docs":{},"i":{"docs":{},"n":{"docs":{},"d":{"docs":{},"e":{"docs":{},"x":{"docs":{},"+":{"docs":{},"n":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}},"c":{"docs":{},"a":{"docs":{},"n":{"docs":{},"i":{"docs":{},"n":{"docs":{},"s":{"docs":{},"e":{"docs":{},"r":{"docs":{},"t":{"docs":{},"b":{"docs":{},"e":{"docs":{},"f":{"docs":{},"o":{"docs":{},"r":{"docs":{},"e":{"docs":{},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"(":{"docs":{},"d":{"docs":{},"a":{"docs":{},"t":{"docs":{},"a":{"docs":{},"l":{"docs":{},"e":{"docs":{},"n":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}}}}}}}}},"p":{"docs":{},"a":{"docs":{},"c":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.007874015748031496}},"i":{"docs":{},"t":{"docs":{},"y":{"docs":{},")":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}},"+":{"docs":{},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"e":{"docs":{},"r":{"docs":{},"e":{"docs":{},"n":{"docs":{},"t":{"docs":{},"r":{"docs":{},"y":{"docs":{},"s":{"docs":{},"i":{"docs":{},"z":{"docs":{},"e":{"docs":{},"+":{"docs":{},"d":{"docs":{},"a":{"docs":{},"t":{"docs":{},"a":{"docs":{},"l":{"docs":{},"e":{"docs":{},"n":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"o":{"docs":{},"p":{"docs":{},"y":{"docs":{},"(":{"docs":{},"d":{"docs":{},"a":{"docs":{},"t":{"docs":{},"a":{"docs":{},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}},"q":{"docs":{},".":{"docs":{},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"e":{"docs":{},"r":{"docs":{},"b":{"docs":{},"u":{"docs":{},"f":{"docs":{},"f":{"docs":{},"e":{"docs":{},"r":{"docs":{},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}},"u":{"docs":{},"n":{"docs":{},"t":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}},"+":{"docs":{},"+":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}},"f":{"docs":{},"u":{"docs":{},"l":{"docs":{},"l":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.007874015748031496}}}}}},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.01968503937007874}}}}}},"m":{"docs":{},"a":{"docs":{},"x":{"docs":{},"c":{"docs":{},"a":{"docs":{},"p":{"docs":{},"a":{"docs":{},"c":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.01968503937007874}}}}}}}}}},"p":{"docs":{},"e":{"docs":{},"e":{"docs":{},"k":{"docs":{},"(":{"docs":{},"q":{"docs":{},".":{"docs":{},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},")":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}},"c":{"docs":{},"h":{"docs":{},"e":{"docs":{},"c":{"docs":{},"k":{"docs":{},"e":{"docs":{},"r":{"docs":{},"r":{"docs":{},"(":{"docs":{},"i":{"docs":{},"n":{"docs":{},"d":{"docs":{},"e":{"docs":{},"x":{"docs":{},")":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}},"u":{"docs":{},"s":{"docs":{},"h":{"docs":{},"(":{"docs":{},"d":{"docs":{},"a":{"docs":{},"t":{"docs":{},"a":{"docs":{},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}},"r":{"docs":{},"i":{"docs":{},"g":{"docs":{},"h":{"docs":{},"t":{"docs":{},"m":{"docs":{},"a":{"docs":{},"r":{"docs":{},"g":{"docs":{},"i":{"docs":{},"n":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.01968503937007874}}}}}}}}}}}}},"t":{"docs":{},"a":{"docs":{},"i":{"docs":{},"l":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.03937007874015748}}}}}}},"u":{"docs":{},"e":{"docs":{},"u":{"docs":{},"e":{"docs":{},".":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}},"r":{"docs":{},"e":{"docs":{},"a":{"docs":{},"c":{"docs":{},"h":{"docs":{},"e":{"docs":{},"d":{"docs":{},".":{"docs":{},"\"":{"docs":{},"}":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}},"t":{"docs":{},"u":{"docs":{},"r":{"docs":{},"n":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.023622047244094488}}}}}}}},"s":{"docs":{},"i":{"docs":{},"z":{"docs":{},"e":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.011811023622047244}}}}},"t":{"docs":{},"a":{"docs":{},"r":{"docs":{},"t":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}},"t":{"docs":{},"a":{"docs":{},"i":{"docs":{},"l":{"docs":{},"，":{"docs":{},"那":{"docs":{},"么":{"docs":{},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"跳":{"docs":{},"了":{"docs":{},"，":{"docs":{},"t":{"docs":{},"a":{"docs":{},"i":{"docs":{},"l":{"docs":{},"也":{"docs":{},"要":{"docs":{},"跳":{"docs":{},"。":{"docs":{},"否":{"docs":{},"则":{"docs":{},"就":{"docs":{},"是":{"docs":{},"t":{"docs":{},"a":{"docs":{},"i":{"docs":{},"l":{"docs":{},"在":{"docs":{},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"之":{"docs":{},"前":{"docs":{},"的":{"docs":{},"场":{"docs":{},"景":{"docs":{},"，":{"docs":{},"就":{"docs":{},"不":{"docs":{},"需":{"docs":{},"要":{"docs":{},"动":{"docs":{},"，":{"docs":{},"效":{"docs":{},"果":{"docs":{},"如":{"docs":{},"下":{"docs":{},"图":{"docs":{},"：":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"i":{"docs":{},"m":{"docs":{},"e":{"docs":{},".":{"docs":{},"n":{"docs":{},"o":{"docs":{},"w":{"docs":{},"(":{"docs":{},")":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}},"r":{"docs":{},"u":{"docs":{},"e":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}},"u":{"docs":{},"i":{"docs":{},"n":{"docs":{},"t":{"6":{"4":{"docs":{},"(":{"docs":{},"l":{"docs":{},"e":{"docs":{},"n":{"docs":{},")":{"docs":{},")":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}},"docs":{}},"docs":{}}}}},"{":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.07086614173228346}}},"}":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.06299212598425197}}},"从":{"docs":{},"上":{"docs":{},"述":{"docs":{},"两":{"docs":{},"张":{"docs":{},"图":{"docs":{},"就":{"docs":{},"可":{"docs":{},"以":{"docs":{},"看":{"docs":{},"出":{"docs":{},"作":{"docs":{},"者":{"docs":{},"对":{"docs":{},"整":{"docs":{},"个":{"docs":{},"b":{"docs":{},"y":{"docs":{},"t":{"docs":{},"e":{"docs":{},"s":{"docs":{},"_":{"docs":{},"q":{"docs":{},"u":{"docs":{},"e":{"docs":{},"u":{"docs":{},"e":{"docs":{},"的":{"docs":{},"设":{"docs":{},"计":{"docs":{},"。":{"docs":{},"其":{"docs":{},"实":{"docs":{},"理":{"docs":{},"论":{"docs":{},"上":{"docs":{},"，":{"docs":{},"如":{"docs":{},"果":{"docs":{},"不":{"docs":{},"考":{"docs":{},"虑":{"docs":{},"t":{"docs":{},"a":{"docs":{},"i":{"docs":{},"l":{"docs":{},"到":{"docs":{},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"之":{"docs":{},"前":{"docs":{},"的":{"docs":{},"情":{"docs":{},"况":{"docs":{},"，":{"docs":{},"就":{"docs":{},"是":{"docs":{},"t":{"docs":{},"a":{"docs":{},"i":{"docs":{},"l":{"docs":{},"往":{"docs":{},"后":{"docs":{},"移":{"docs":{},"动":{"docs":{},"，":{"docs":{},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"也":{"docs":{},"往":{"docs":{},"后":{"docs":{},"移":{"docs":{},"动":{"docs":{},"，":{"docs":{},"然":{"docs":{},"后":{"docs":{},"r":{"docs":{},"i":{"docs":{},"g":{"docs":{},"h":{"docs":{},"t":{"docs":{},"m":{"docs":{},"a":{"docs":{},"r":{"docs":{},"g":{"docs":{},"i":{"docs":{},"n":{"docs":{},"是":{"docs":{},"和":{"docs":{},"t":{"docs":{},"a":{"docs":{},"i":{"docs":{},"l":{"docs":{},"保":{"docs":{},"持":{"docs":{},"一":{"docs":{},"致":{"docs":{},"的":{"docs":{},"。":{"docs":{},"一":{"docs":{},"旦":{"docs":{},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"到":{"docs":{},"达":{"docs":{},"r":{"docs":{},"i":{"docs":{},"g":{"docs":{},"h":{"docs":{},"t":{"docs":{},"m":{"docs":{},"a":{"docs":{},"r":{"docs":{},"g":{"docs":{},"i":{"docs":{},"n":{"docs":{},"，":{"docs":{},"说":{"docs":{},"明":{"docs":{},"队":{"docs":{},"列":{"docs":{},"出":{"docs":{},"去":{"docs":{},"完":{"docs":{},"毕":{"docs":{},"，":{"docs":{},"然":{"docs":{},"后":{"docs":{},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"和":{"docs":{},"t":{"docs":{},"a":{"docs":{},"i":{"docs":{},"l":{"docs":{},"移":{"docs":{},"动":{"docs":{},"到":{"docs":{},"队":{"docs":{},"列":{"docs":{},"首":{"docs":{},"部":{"docs":{},"，":{"docs":{},"开":{"docs":{},"始":{"docs":{},"新":{"docs":{},"的":{"docs":{},"操":{"docs":{},"作":{"docs":{},"。":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"他":{"docs":{},"先":{"docs":{},"对":{"docs":{},"空":{"docs":{},"间":{"docs":{},"做":{"docs":{},"了":{"docs":{},"判":{"docs":{},"断":{"docs":{},"：":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}},"但":{"docs":{},"是":{"docs":{},"因":{"docs":{},"为":{"docs":{},"存":{"docs":{},"在":{"docs":{},"一":{"docs":{},"种":{"docs":{},"c":{"docs":{},"a":{"docs":{},"s":{"docs":{},"e":{"docs":{},"就":{"docs":{},"是":{"docs":{},"可":{"docs":{},"能":{"docs":{},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"还":{"docs":{},"没":{"docs":{},"到":{"docs":{},"达":{"docs":{},"r":{"docs":{},"i":{"docs":{},"g":{"docs":{},"h":{"docs":{},"t":{"docs":{},"m":{"docs":{},"a":{"docs":{},"r":{"docs":{},"g":{"docs":{},"i":{"docs":{},"n":{"docs":{},"，":{"docs":{},"但":{"docs":{},"是":{"docs":{},"用":{"docs":{},"户":{"docs":{},"想":{"docs":{},"插":{"docs":{},"入":{"docs":{},"数":{"docs":{},"据":{"docs":{},"，":{"docs":{},"t":{"docs":{},"a":{"docs":{},"i":{"docs":{},"l":{"docs":{},"之":{"docs":{},"后":{"docs":{},"的":{"docs":{},"数":{"docs":{},"据":{"docs":{},"不":{"docs":{},"够":{"docs":{},"用":{"docs":{},"了":{"docs":{},"，":{"docs":{},"那":{"docs":{},"就":{"docs":{},"要":{"docs":{},"考":{"docs":{},"虑":{"docs":{},"这":{"docs":{},"个":{"docs":{},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"之":{"docs":{},"前":{"docs":{},"的":{"docs":{},"空":{"docs":{},"间":{"docs":{},"够":{"docs":{},"不":{"docs":{},"够":{"docs":{},"用":{"docs":{},"，":{"docs":{},"在":{"docs":{},"这":{"docs":{},"种":{"docs":{},"情":{"docs":{},"况":{"docs":{},"下":{"docs":{},"，":{"docs":{},"t":{"docs":{},"a":{"docs":{},"i":{"docs":{},"l":{"docs":{},"和":{"docs":{},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"的":{"docs":{},"关":{"docs":{},"系":{"docs":{},"会":{"docs":{},"变":{"docs":{},"成":{"docs":{},"图":{"2":{"docs":{},"的":{"docs":{},"情":{"docs":{},"况":{"docs":{},"。":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}},"docs":{}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"先":{"docs":{},"看":{"docs":{},"看":{"docs":{},"p":{"docs":{},"u":{"docs":{},"s":{"docs":{},"h":{"docs":{},"这":{"docs":{},"个":{"docs":{},"操":{"docs":{},"作":{"docs":{},"的":{"docs":{},"逻":{"docs":{},"辑":{"docs":{},"：":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}},"已":{"docs":{},"经":{"docs":{},"把":{"docs":{},"中":{"docs":{},"间":{"docs":{},"的":{"docs":{},"空":{"docs":{},"白":{"docs":{},"填":{"docs":{},"充":{"docs":{},"到":{"docs":{},"新":{"docs":{},"的":{"docs":{},"数":{"docs":{},"组":{"docs":{},"中":{"docs":{},"了":{"docs":{},"。":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}},"扩":{"docs":{},"容":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}},"是":{"docs":{},"采":{"docs":{},"用":{"docs":{},"两":{"docs":{},"倍":{"docs":{},"扩":{"docs":{},"容":{"docs":{},"方":{"docs":{},"案":{"docs":{},"，":{"docs":{},"然":{"docs":{},"后":{"docs":{},"执":{"docs":{},"行":{"docs":{},"拷":{"docs":{},"贝":{"docs":{},"操":{"docs":{},"作":{"docs":{},"。":{"docs":{},"这":{"docs":{},"里":{"docs":{},"比":{"docs":{},"较":{"docs":{},"核":{"docs":{},"心":{"docs":{},"的":{"docs":{},"逻":{"docs":{},"辑":{"docs":{},"是":{"docs":{},"如":{"docs":{},"果":{"docs":{},"是":{"docs":{},"t":{"docs":{},"a":{"docs":{},"i":{"docs":{},"l":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"整":{"docs":{},"体":{"docs":{},"设":{"docs":{},"计":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}},"是":{"docs":{},"否":{"docs":{},"可":{"docs":{},"以":{"docs":{},"扩":{"docs":{},"容":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}},"在":{"docs":{},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"前":{"docs":{},"面":{"docs":{},"能":{"docs":{},"够":{"docs":{},"插":{"docs":{},"入":{"docs":{},"数":{"docs":{},"据":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}},"t":{"docs":{},"a":{"docs":{},"i":{"docs":{},"l":{"docs":{},"尾":{"docs":{},"部":{"docs":{},"能":{"docs":{},"够":{"docs":{},"插":{"docs":{},"入":{"docs":{},"数":{"docs":{},"据":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}},"满":{"docs":{},"足":{"docs":{},"扩":{"docs":{},"容":{"docs":{},"条":{"docs":{},"件":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}},"最":{"docs":{},"后":{"docs":{},"会":{"docs":{},"执":{"docs":{},"行":{"docs":{},"真":{"docs":{},"正":{"docs":{},"的":{"docs":{},"p":{"docs":{},"u":{"docs":{},"s":{"docs":{},"h":{"docs":{},"逻":{"docs":{},"辑":{"docs":{},"，":{"docs":{},"这":{"docs":{},"里":{"docs":{},"看":{"docs":{},"看":{"docs":{},"p":{"docs":{},"u":{"docs":{},"s":{"docs":{},"h":{"docs":{},"逻":{"docs":{},"辑":{"docs":{},":":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}}}}}}}}}},"然":{"docs":{},"后":{"docs":{},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"跳":{"docs":{},"过":{"docs":{},"已":{"docs":{},"经":{"docs":{},"p":{"docs":{},"o":{"docs":{},"p":{"docs":{},"出":{"docs":{},"来":{"docs":{},"的":{"docs":{},"数":{"docs":{},"据":{"docs":{},"，":{"docs":{},"如":{"docs":{},"果":{"docs":{},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"到":{"docs":{},"达":{"docs":{},"底":{"docs":{},"部":{"docs":{},"，":{"docs":{},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"就":{"docs":{},"跳":{"docs":{},"回":{"docs":{},"到":{"docs":{},"l":{"docs":{},"e":{"docs":{},"f":{"docs":{},"t":{"docs":{},"m":{"docs":{},"a":{"docs":{},"r":{"docs":{},"g":{"docs":{},"i":{"docs":{},"n":{"docs":{},"i":{"docs":{},"n":{"docs":{},"d":{"docs":{},"e":{"docs":{},"x":{"docs":{},"，":{"docs":{},"在":{"docs":{},"这":{"docs":{},"种":{"docs":{},"情":{"docs":{},"况":{"docs":{},"下":{"docs":{},"，":{"docs":{},"如":{"docs":{},"果":{"docs":{},"是":{"docs":{},"正":{"docs":{},"常":{"docs":{},"场":{"docs":{},"景":{"docs":{},"：":{"docs":{},"就":{"docs":{},"是":{"docs":{},"h":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"读":{"docs":{},"取":{"docs":{},"b":{"docs":{},"l":{"docs":{},"o":{"docs":{},"c":{"docs":{},"k":{"docs":{},"s":{"docs":{},"i":{"docs":{},"z":{"docs":{},"e":{"docs":{},"的":{"docs":{},"数":{"docs":{},"据":{"docs":{},"。":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}},"这":{"docs":{},"里":{"docs":{},"会":{"docs":{},"更":{"docs":{},"新":{"docs":{},"r":{"docs":{},"i":{"docs":{},"g":{"docs":{},"h":{"docs":{},"t":{"docs":{},"m":{"docs":{},"a":{"docs":{},"r":{"docs":{},"g":{"docs":{},"i":{"docs":{},"n":{"docs":{},"，":{"docs":{},"这":{"docs":{},"里":{"docs":{},"要":{"docs":{},"注":{"docs":{},"意":{"docs":{},"了":{"docs":{},"，":{"docs":{},"如":{"docs":{},"果":{"docs":{},"是":{"docs":{},"t":{"docs":{},"a":{"docs":{},"i":{"docs":{},"l":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"其":{"docs":{},"实":{"docs":{},"我":{"docs":{},"有":{"docs":{},"个":{"docs":{},"疑":{"docs":{},"惑":{"docs":{},"，":{"docs":{},"我":{"docs":{},"没":{"docs":{},"看":{"docs":{},"出":{"docs":{},"来":{"docs":{},"这":{"docs":{},"个":{"docs":{},"补":{"docs":{},"充":{"docs":{},"的":{"docs":{},"意":{"docs":{},"义":{"docs":{},"是":{"docs":{},"啥":{"docs":{},"，":{"docs":{},"因":{"docs":{},"为":{"docs":{},"c":{"docs":{},"o":{"docs":{},"p":{"docs":{},"y":{"docs":{},"(":{"docs":{},"q":{"docs":{},".":{"docs":{},"a":{"docs":{},"r":{"docs":{},"r":{"docs":{},"a":{"docs":{},"y":{"docs":{},",":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"首":{"docs":{},"先":{"docs":{},"是":{"docs":{},"把":{"docs":{},"长":{"docs":{},"度":{"docs":{},"设":{"docs":{},"置":{"docs":{},"成":{"docs":{},"b":{"docs":{},"y":{"docs":{},"t":{"docs":{},"e":{"docs":{},"s":{"docs":{},"，":{"docs":{},"然":{"docs":{},"后":{"docs":{},"先":{"docs":{},"写":{"docs":{},"入":{"docs":{},"数":{"docs":{},"据":{"docs":{},"的":{"docs":{},"长":{"docs":{},"度":{"docs":{},"，":{"docs":{},"最":{"docs":{},"后":{"docs":{},"再":{"docs":{},"写":{"docs":{},"入":{"docs":{},"数":{"docs":{},"据":{"docs":{},"。":{"docs":{"bigcache/bytes_queue.html":{"ref":"bigcache/bytes_queue.html","tf":0.003937007874015748}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"length":508},"corpusTokens":["!=","!q.caninsertaftertail(datalen","&&","&queueerror{\"ful","([]byte,","(int,","(q","*bytesqueue)","+","+=","...","0","0,","1,",":",":=","=","==",">",">=","[]byte)","[]byte,","allocateadditionalmemory(minimum","bigcach","binary.putuvarint(q.headerbuffer,","binary.uvarint(q.array[index:])","blocksize,","bytes_queu","bytesqueue是一个线程不安全的fifo队列，底层基于bytes数组","code","codeview","copy(data","copy(q.array,","copy(q.array[q.tail:],","data,","data[:len])","datalen","datalen)","err","error)","fals","func","getuvarintsize(uint32(datalen))","go开源项目bigcache如何加速并发访问以及避免高额的gc开销","headerentrys","headerentrysize)","headerentrysize,","index","index+n+int(blocksize)],","index,","int)","int,","leftmarginindex","len","len(data)","len)","limit","make([]byte,","maximum","n","n(跳过长度)","n,","nil","nil,","oldarray","oldarray[:q.rightmargin])","peek(index","pop","pop()","pop这里先调用peek，找到head对应的数据，这里细看下peek函数，binary.uvarint函数从字节数组中取出一个uint64的编码，这里n是bytes的长度，然后从index","push","push(data","push里面的copy逻辑就是最简单的数据拷贝了","q.allocateadditionalmemory(datalen","q.array","q.array[index+n","q.caninsertbeforehead(datalen","q.capac","q.capacity)","q.capacity+headerentrysize+datalen","q.copy(data,","q.copy(q.headerbuffer,","q.count","q.count++","q.full","q.head","q.maxcapac","q.peek(q.head)","q.peekcheckerr(index)","q.push(data,","q.rightmargin","q.tail","queue.","reached.\"}","return","size","start","tail，那么head跳了，tail也要跳。否则就是tail在head之前的场景，就不需要动，效果如下图：","time.now()","true","uint64(len))","viewer通过分析流行的go开源项目，学习golang的开发技巧","{","}","介绍","介绍实现的文章","从上述两张图就可以看出作者对整个bytes_queue的设计。其实理论上，如果不考虑tail到head之前的情况，就是tail往后移动，head也往后移动，然后rightmargin是和tail保持一致的。一旦head到达rightmargin，说明队列出去完毕，然后head和tail移动到队列首部，开始新的操作。","他先对空间做了判断：","但是因为存在一种case就是可能head还没到达rightmargin，但是用户想插入数据，tail之后的数据不够用了，那就要考虑这个head之前的空间够不够用，在这种情况下，tail和head的关系会变成图2的情况。","先看看push这个操作的逻辑：","函数引用模块关系","已经把中间的空白填充到新的数组中了。","扩容","扩容是采用两倍扩容方案，然后执行拷贝操作。这里比较核心的逻辑是如果是tail","整体设计","是否可以扩容","是否在head前面能够插入数据","是否在tail尾部能够插入数据","是否满足扩容条件","最后会执行真正的push逻辑，这里看看push逻辑:","模块之间引用关系","然后head跳过已经pop出来的数据，如果head到达底部，head就跳回到leftmarginindex，在这种情况下，如果是正常场景：就是head","读取blocksize的数据。","这里会更新rightmargin，这里要注意了，如果是tail","这里其实我有个疑惑，我没看出来这个补充的意义是啥，因为copy(q.array,","项目地址","首先是把长度设置成bytes，然后先写入数据的长度，最后再写入数据。"],"pipeline":["stopWordFilter","stemmer"]},"store":{"./":{"url":"./","title":"介绍","keywords":"","body":"CodeViewer\n\ncode viewer通过分析流行的go开源项目，学习golang的开发技巧\n\n"},"bigcache/BigCache.html":{"url":"bigcache/BigCache.html","title":"BigCache","keywords":"","body":"BigCache\n项目地址\n介绍实现的文章\nGo开源项目BigCache如何加速并发访问以及避免高额的GC开销\n"},"bigcache/modules.html":{"url":"bigcache/modules.html","title":"模块之间引用关系","keywords":"","body":"模块之间引用关系\n\n"},"bigcache/function.html":{"url":"bigcache/function.html","title":"函数引用模块关系","keywords":"","body":"函数引用模块关系\n\n"},"bigcache/bytes_queue.html":{"url":"bigcache/bytes_queue.html","title":"bytes_queue","keywords":"","body":"BytesQueue是一个线程不安全的fifo队列，底层基于bytes数组\n整体设计\n\n\n从上述两张图就可以看出作者对整个bytes_queue的设计。其实理论上，如果不考虑tail到head之前的情况，就是tail往后移动，head也往后移动，然后rightMargin是和tail保持一致的。一旦head到达rightMargin，说明队列出去完毕，然后head和tail移动到队列首部，开始新的操作。\n但是因为存在一种case就是可能head还没到达rightMargin，但是用户想插入数据，tail之后的数据不够用了，那就要考虑这个head之前的空间够不够用，在这种情况下，tail和head的关系会变成图2的情况。\nPush\n先看看Push这个操作的逻辑：\nfunc (q *BytesQueue) Push(data []byte) (int, error) {\n    dataLen := len(data)\n    headerEntrySize := getUvarintSize(uint32(dataLen))\n\n    if !q.canInsertAfterTail(dataLen + headerEntrySize) {\n        if q.canInsertBeforeHead(dataLen + headerEntrySize) {\n            q.tail = leftMarginIndex\n        } else if q.capacity+headerEntrySize+dataLen >= q.maxCapacity && q.maxCapacity > 0 {\n            return -1, &queueError{\"Full queue. Maximum size limit reached.\"}\n        } else {\n            q.allocateAdditionalMemory(dataLen + headerEntrySize)\n        }\n    }\n\n    index := q.tail\n\n    q.push(data, dataLen)\n\n    return index, nil\n}\n\n他先对空间做了判断：\n\n是否在tail尾部能够插入数据\n是否在head前面能够插入数据\n是否满足扩容条件\n是否可以扩容\n\n最后会执行真正的push逻辑，这里看看push逻辑:\nfunc (q *BytesQueue) push(data []byte, len int) {\n    headerEntrySize := binary.PutUvarint(q.headerBuffer, uint64(len))\n    q.copy(q.headerBuffer, headerEntrySize)\n\n    q.copy(data, len)\n\n    if q.tail > q.head {\n        q.rightMargin = q.tail\n    }\n    if q.tail == q.head {\n        q.full = true\n    }\n\n    q.count++\n}\n\n首先是把长度设置成bytes，然后先写入数据的长度，最后再写入数据。\n这里会更新rightMargin，这里要注意了，如果是tail \npush里面的copy逻辑就是最简单的数据拷贝了\nfunc (q *BytesQueue) copy(data []byte, len int) {\n    q.tail += copy(q.array[q.tail:], data[:len])\n}\n\nPop\nfunc (q *BytesQueue) Pop() ([]byte, error) {\n    data, headerEntrySize, err := q.peek(q.head)\n    if err != nil {\n        return nil, err\n    }\n    size := len(data)\n\n    q.head += headerEntrySize + size\n    q.count--\n\n    if q.head == q.rightMargin {\n        q.head = leftMarginIndex\n        if q.tail == q.rightMargin {\n            q.tail = leftMarginIndex\n        }\n        q.rightMargin = q.tail\n    }\n\n    q.full = false\n\n    return data, nil\n}\n\nPop这里先调用peek，找到head对应的数据，这里细看下peek函数，binary.Uvarint函数从字节数组中取出一个uint64的编码，这里n是bytes的长度，然后从index + n(跳过长度) 读取blockSize的数据。\nfunc (q *BytesQueue) peek(index int) ([]byte, int, error) {\n    err := q.peekCheckErr(index)\n    if err != nil {\n        return nil, 0, err\n    }\n\n    blockSize, n := binary.Uvarint(q.array[index:])\n    return q.array[index+n : index+n+int(blockSize)], n, nil\n}\n\n然后head跳过已经Pop出来的数据，如果head到达底部，head就跳回到leftMarginIndex，在这种情况下，如果是正常场景：就是head ... tail，那么head跳了，tail也要跳。否则就是tail在head之前的场景，就不需要动，效果如下图：\n\n扩容\nfunc (q *BytesQueue) allocateAdditionalMemory(minimum int) {\n    start := time.Now()\n    if q.capacity  q.maxCapacity && q.maxCapacity > 0 {\n        q.capacity = q.maxCapacity\n    }\n\n    oldArray := q.array\n    q.array = make([]byte, q.capacity)\n\n    if leftMarginIndex != q.rightMargin {\n        copy(q.array, oldArray[:q.rightMargin])\n\n        if q.tail \n扩容是采用两倍扩容方案，然后执行拷贝操作。这里比较核心的逻辑是如果是tail \n这里其实我有个疑惑，我没看出来这个补充的意义是啥，因为copy(q.array, oldArray[:q.rightMargin]) 已经把中间的空白填充到新的数组中了。\n"}}}